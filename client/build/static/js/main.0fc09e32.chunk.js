(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{283:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(25),c=n.n(a),s=n(26),i=(n(139),n(14)),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,307)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},l=n(12),u=n(22),d=n(303),j=n(304),b=n(305),h=n(284),p=n(285),x=n(286),O=n(287),m=n(288),f=n(289),v=n(290),g=n(291),y=n(16),E=n.n(y),S=n(37),w="AUTH_ATTEMPTING",C="AUTH_SUCCESS",k="AUTH_FAILED",A="USER_LOGOUT",_="PROFILE_FETCHED",D="ADD_ERROR",N="CLEAR_ERRORS",T="EXPENSE_SAVED",R="EXPENSE_UPDATED",B="RESET_SAVED",F="FETCHING_EXPENSE",I="FETCHED_SUCCESS",L="FETCHED_FAILED",P=n(23),U=n.n(P),M=function(e){return U.a.post("/login",e)};function V(e){e?U.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete U.a.defaults.headers.common.Authorization}var Y="expense_app_token",q=function(){return function(){var e=Object(S.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.get("/me");case 3:n=e.sent,r=n.data.user,t({type:_,payload:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},H=function(e){return localStorage.setItem(Y,e),{type:C}},z=function(e){return{type:k,payload:e}},X=function(e){var t=e.response.data.error;return{type:D,payload:t}},$=function(e){return{type:N}},G=function(e){return U.a.post("/expense",e)},J=function(e){return U.a.put("/expense/".concat(e._id),e)},W=function(e){return U.a.delete("/expense/".concat(e))},K=function(e){return U.a.get(e)},Q=function(e){return function(){var t=Object(S.a)(E.a.mark((function t(n){var r,a,c,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/expense",a=e>-1?"".concat(r,"/").concat(e):r,n({type:F}),t.next=6,K(a);case 6:c=t.sent,s=c.data,n({type:I,payload:s}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:L}),n(X(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Z=function(){return{type:B}},ee=n(2),te=Object(i.b)((function(e){var t=e.auth;return{isAuth:t.isAuth,profile:t.profile}}),{logOut:function(){return localStorage.clear(),{type:A}}})((function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],y=function(){return l(!o)};return Object(ee.jsx)("div",{children:Object(ee.jsxs)(O.a,{className:"px-5 py-2",color:"dark",dark:!0,expand:"md",children:[Object(ee.jsx)(m.a,{href:"/",children:"MERN expense"}),Object(ee.jsx)(f.a,{onClick:function(){return c(!a)}}),Object(ee.jsx)(v.a,{isOpen:a,navbar:!0,children:Object(ee.jsx)(g.a,{className:"ms-auto",navbar:!0,children:function(){var t=e.isAuth,n=e.logOut,r=e.profile;return t?Object(ee.jsxs)(d.a,{isOpen:o,toggle:y,children:[Object(ee.jsxs)(j.a,{caret:!0,size:"sm",children:["Welcome ",r.name]}),Object(ee.jsx)(b.a,{children:Object(ee.jsx)(h.a,{onClick:function(){return n()},children:"Logout"})})]}):Object(ee.jsx)(p.a,{children:Object(ee.jsx)(x.a,{href:"/login",children:"Login"})})}()})})]})})})),ne=n(10),re=n(134),ae=["isAuth","component"];var ce=Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(e){var t=e.isAuth,n=e.component,r=Object(re.a)(e,ae);return Object(ee.jsx)(l.b,Object(ne.a)(Object(ne.a)({},r),{},{render:function(e){return t?Object(ee.jsx)(n,Object(ne.a)({},e)):Object(ee.jsx)(l.a,{to:"/login"})}}))}));function se(e){var t=e.onClick;return Object(ee.jsx)("div",{style:{position:"fixed",bottom:40,right:40,cursor:"pointer"},children:Object(ee.jsx)("div",{style:{borderRadius:50,width:60,height:60,background:"#3972F5",display:"flex",flex:1,justifyContent:"center",alignItems:"center",color:"#fff",boxShadow:"2px 2px 3px #999"},onClick:t,children:Object(ee.jsx)("i",{className:"fa fa-plus"})})})}var ie=n(306),oe=n(292),le=n(293);var ue=Object(i.b)((function(e){var t=e.expense,n=e.errors;return{saved:t.saved,error:n.message}}),{saveExpense:function(e){return function(){var t=Object(S.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n($()),t.next=4,G(e);case 4:n({type:T}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(X(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},resetSaved:Z,fetchExpense:Q})((function(e){var t=Object(r.useState)(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useRef)();!function(e){var t=Object(r.useRef)(!1);Object(r.useEffect)((function(){t.current?e():t.current=!0}))}((function(){var t=e.saved,n=e.error,r=e.resetSaved,c=e.fetchExpense;n&&s.current.setSubmitting(!1),t&&a&&(i(),c(e.selected),r(),s.current.resetForm())}));var i=function(){return c(!a)};return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(se,{onClick:i}),Object(ee.jsxs)(ie.a,{isOpen:a,toggle:i,children:[Object(ee.jsx)(oe.a,{toggle:i,children:"Add expense"}),Object(ee.jsx)(le.a,{children:Object(ee.jsx)(Ae,{onSubmit:function(t){e.saveExpense(t)},formRef:s})})]})]})})),de=n(294);var je=Object(i.b)((function(e){return{message:e.errors.message}}))((function(e){var t=e.message;return t?Object(ee.jsx)(de.a,{color:"danger",children:t}):Object(ee.jsx)(ee.Fragment,{})}));function be(e){var t=e.size,n=t||30;return Object(ee.jsx)("div",{style:{display:"flex",flex:1,alignItems:"center",justifyContent:"center",marginTop:30},children:Object(ee.jsx)("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true",style:{fontSize:n}})})}var he=n(295),pe=n(296),xe=n(124),Oe=n(29),me=n.n(Oe);function fe(e){var t=e.item,n=e.onDelete;return Object(ee.jsxs)(he.a,{children:[Object(ee.jsxs)("div",{className:"float-start",children:[Object(ee.jsx)("span",{style:{marginRight:8},children:t.description?t.description:"No available description"}),Object(ee.jsxs)(pe.a,{className:"bg-secondary",children:["$ ",t.amount]}),Object(ee.jsx)("div",{className:"text-muted",children:me()(t.created).format("LL")})]}),Object(ee.jsxs)("div",{className:"float-end",children:[Object(ee.jsx)(s.b,{to:{pathname:"/edit",state:{item:t}},className:"btn btn-secondary btn-sm",children:"Edit"}),"\xa0",Object(ee.jsx)(xe.a,{className:"btn btn-danger btn-sm",onClick:n,"data-id":t._id,children:"Delete"})]})]})}var ve=me.a.months();function ge(e){var t=e.onSelectMonth;return Object(ee.jsxs)("div",{style:{marginBottom:20},children:[Object(ee.jsx)("span",{children:"Select month "}),Object(ee.jsx)("select",{value:e.selected,onChange:function(e){var n=e.target.value;t(n)},children:ve.map((function(e,t){return Object(ee.jsxs)("option",{value:t,children:[" ",e," "]},t)}))})]})}var ye=n(297),Ee=n(298),Se=n(299),we=n(300),Ce=n(44),ke=n(15);function Ae(e){var t=e.btnTxt,n=void 0===t?"Save":t,r=e.onSubmit,a=e.formRef,c=e.expense,s=void 0===c?{}:c,i=s.description,o=void 0===i?"":i,l=s.amount,u=void 0===l?"":l,d=s.created,j=void 0===d?void 0:d,b=j?me()(j).format("YYYY-MM-DD"):me()().format("YYYY-MM-DD");return Object(ee.jsx)(Ce.a,{initialValues:{amount:u,created:b,description:o},innerRef:a,onSubmit:r,validationSchema:ke.c().shape({description:ke.d().min(3),amount:ke.b().min(1).required(),created:ke.a().required()}),children:function(e){var t=e.errors,r=e.touched,a=e.handleBlur,c=e.handleChange,s=e.values,i=e.isValid,o=e.isSubmitting,l=e.handleSubmit;return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(je,{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Description"}),Object(ee.jsx)(Se.a,{invalid:t.description&&r.description,name:"description",value:s.description,type:"text",placeholder:"Description",onChange:c,onBlur:a}),t.description&&r.description&&Object(ee.jsx)(we.a,{children:t.description})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Amount"}),Object(ee.jsx)(Se.a,{invalid:t.amount&&r.amount,name:"amount",value:s.amount,type:"number",placeholder:"Expense amount",onChange:c,onBlur:a}),t.amount&&r.amount&&Object(ee.jsx)(we.a,{children:t.amount})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Date"}),Object(ee.jsx)(Se.a,{invalid:t.created&&r.created,name:"created",value:s.created,type:"date",placeholder:"expense amount",onChange:c,onBlur:a}),t.created&&r.created&&Object(ee.jsx)(we.a,{children:t.created})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(xe.a,{color:"primary",onClick:l,disabled:!i||o,children:[" ",n," "]})]})}})}var _e=function(e){var t=e.data;return Object(ee.jsx)("div",{children:t.total&&Object(ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flex:1},children:[Object(ee.jsxs)(xe.a,{color:"dark",children:["Total ",Object(ee.jsxs)(pe.a,{color:"light",children:[t.total," $"]})]}),Object(ee.jsxs)(xe.a,{color:"success",children:["Average ",Object(ee.jsxs)(pe.a,{color:"light",children:[t.avg," $"]})]}),Object(ee.jsxs)(xe.a,{color:"danger",children:["Max ",Object(ee.jsxs)(pe.a,{color:"light",children:[t.max," $"]})]})]})})},De=n(301);var Ne=Object(i.b)((function(e){var t=e.expense;return{fetching:t.fetching,expense:t.expense,statistics:t.statistics}}),{deleteExpense:function(e){return function(){var t=Object(S.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n($()),t.next=4,W(e);case 4:n(Q()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(X(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchExpense:Q})((function(e){var t=Object(r.useState)(me()().month()),n=Object(u.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){(0,e.fetchExpense)(a)}),[a]);var s=e.fetching,i=e.expense,o=e.statistics;function l(t){var n=t.target.attributes.getNamedItem("data-id").value;e.deleteExpense(n)}return Object(ee.jsxs)("div",{style:{marginTop:30},children:[Object(ee.jsx)(ge,{selected:a,onSelectMonth:function(e){c(e)}}),Object(ee.jsx)("h3",{children:"Expense List"}),Object(ee.jsx)("hr",{}),s?Object(ee.jsx)(be,{}):i.length>0?Object(ee.jsxs)("div",{children:[Object(ee.jsx)(_e,{data:o}),Object(ee.jsx)("hr",{}),Object(ee.jsxs)(De.a,{children:[" ",i.map((function(e){return Object(ee.jsx)(fe,{item:e,onDelete:l},e._id)}))]})]}):Object(ee.jsx)("div",{children:Object(ee.jsx)(de.a,{style:{display:"flex",justifyContent:"center"},color:"secondary",children:"No saved expenses for this month"})}),Object(ee.jsx)(ue,{selected:a})]})}));var Te=Object(i.b)((function(e){var t=e.auth;return{attempting:t.attempting,error:t.error,isAuth:t.isAuth}}),{signIn:function(e){return function(){var t=Object(S.a)(E.a.mark((function t(n){var r,a,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:w}),t.prev=1,t.next=4,M(e);case 4:r=t.sent,V((a=r.data).token),n(q()),n(H(a.token)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),c=t.t0.response.data,n(z(c.error));case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){!function(e){var t=Object(r.useRef)(!1);Object(r.useEffect)((function(){t.current?e():t.current=!0}))}((function(){e.isAuth&&e.history.push("/")}));var t=ke.c({email:ke.d().email("Enter a valid email").required("Email is required"),password:ke.d().min(6,"Password must contain at least 8 charcters").required("Enter your password")}),n=Object(Ce.b)({initialValues:{email:"",password:""},onSubmit:function(){e.signIn(n.values),n.resetForm()},validationSchema:t});return Object(ee.jsxs)("div",{style:{display:"block",padding:20},children:[Object(ee.jsx)("h3",{children:"Sign in to your account"}),Object(ee.jsx)("hr",{}),function(){var t=e.error;if(t)return Object(ee.jsx)(de.a,{color:"danger",children:t})}(),Object(ee.jsxs)("div",{children:[Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Email"}),Object(ee.jsx)(Se.a,{valid:!n.errors.email&&n.touched.email,invalid:n.errors.email&&n.touched.email,name:"email",type:"email",onBlur:n.handleBlur,value:n.values.email,onChange:n.handleChange("email")}),Object(ee.jsxs)(we.a,{children:[n.errors.email," "]})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Password"}),Object(ee.jsx)(Se.a,{valid:!n.errors.password&&n.touched.password,invalid:n.errors.password&&n.touched.password,name:"password",type:"password",onBlur:n.handleBlur,value:n.values.password,onChange:n.handleChange("password")}),Object(ee.jsxs)(we.a,{children:[n.errors.password," "]})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)("div",{className:"text-center",children:[Object(ee.jsx)(xe.a,{color:"primary",type:"submit",onClick:n.handleSubmit,disabled:!n.isValid||n.isSubmitting,children:" Sign In"}),Object(ee.jsx)("br",{}),"Do not have an account ? ",Object(ee.jsx)(s.b,{to:"/signup",children:"Sign up here"})]})]})]})})),Re=function(){var e=ke.c({name:ke.d().required("Enter your name"),email:ke.d().email("Enter a valid email").required("Enter your email"),password:ke.d().min(6,"Password must contain at least 8 charcters").required("Enter a password")}),t=Object(Ce.b)({initialValues:{name:"",email:"",password:""},onSubmit:function(){t.resetForm()},validationSchema:e});return Object(ee.jsxs)("div",{style:{display:"block",padding:20},children:[Object(ee.jsx)("h3",{children:"Create a new account"}),Object(ee.jsx)("hr",{}),Object(ee.jsxs)("div",{children:[Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Name"}),Object(ee.jsx)(Se.a,{placeholder:"Enter your full name",valid:!t.errors.name&&t.touched.name,invalid:t.errors.name&&t.touched.name,name:"name",type:"text",onBlur:t.handleBlur,value:t.values.name,onChange:t.handleChange("name")}),Object(ee.jsxs)(we.a,{children:[t.errors.name," "]})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Email"}),Object(ee.jsx)(Se.a,{placeholder:"Enter your email",valid:!t.errors.email&&t.touched.email,invalid:t.errors.email&&t.touched.email,name:"email",type:"email",onBlur:t.handleBlur,value:t.values.email,onChange:t.handleChange("email")}),Object(ee.jsxs)(we.a,{children:[t.errors.email," "]})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)(ye.a,{children:[Object(ee.jsx)(Ee.a,{children:"Password"}),Object(ee.jsx)(Se.a,{placeholder:"Enter a passwoord",valid:!t.errors.password&&t.touched.password,invalid:t.errors.password&&t.touched.password,name:"password",type:"password",onBlur:t.handleBlur,value:t.values.password,onChange:t.handleChange("password")}),Object(ee.jsxs)(we.a,{children:[t.errors.password," "]})]}),Object(ee.jsx)("br",{}),Object(ee.jsxs)("div",{className:"text-center",children:[Object(ee.jsx)(xe.a,{color:"primary",type:"submit",onClick:t.handleSubmit,disabled:!t.isValid||t.isSubmitting,children:" Sign Up "}),Object(ee.jsx)("br",{}),"Have an account ? ",Object(ee.jsx)(s.b,{to:"/login",children:"Login"})]})]})]})};var Be=Object(i.b)((function(e){return{updated:e.expense.updated}}),{resetSaved:Z,updateExpense:function(e){return function(){var t=Object(S.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n($()),t.next=4,J(e);case 4:n({type:R}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(X(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t,n=Object(r.useRef)(!0);Object(r.useEffect)((function(){if(n.current)n.current=!1;else{var t=e.updated,r=e.resetSaved;t&&(r(),e.history.push("/"))}}));try{t=e.location.state.item}catch(a){t=void 0}return t||e.history.push("/"),Object(ee.jsxs)("div",{style:{marginTop:20},children:[Object(ee.jsx)("h3",{children:"Edit expense"}),Object(ee.jsx)("hr",{}),Object(ee.jsx)(Ae,{onSubmit:function(t){var n=e.location.state.item;t._id=n._id,e.updateExpense(t)},btnTxt:"Update",expense:t})]})})),Fe=n(302);var Ie=function(){return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(te,{}),Object(ee.jsxs)(Fe.a,{children:[Object(ee.jsxs)(l.d,{children:[Object(ee.jsx)(ce,{path:"/",component:Ne,exact:!0}),Object(ee.jsx)(ce,{path:"/edit",component:Be,exact:!0})]}),Object(ee.jsx)(l.b,{path:"/Signup",component:Re,exact:!0}),Object(ee.jsx)(l.b,{path:"/Login",component:Te,exact:!0})]})]})},Le=n(45),Pe=n(133),Ue={attempting:!1,isAuth:!1,profile:{},error:null};var Me={saved:!1,updated:!1,fetching:!1,expense:[],statistics:{}},Ve={message:null},Ye=Object(Le.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case w:return Object(ne.a)(Object(ne.a)({},e),{},{attempting:!0,isAuth:!1,error:null});case C:return Object(ne.a)(Object(ne.a)({},e),{},{attempting:!1,isAuth:!0,profile:{},error:null});case k:return Object(ne.a)(Object(ne.a)({},e),{},{attempting:!1,isAuth:!1,error:r});case A:return Object(ne.a)(Object(ne.a)({},e),{},{isAuth:!1,profile:{}});case _:return Object(ne.a)(Object(ne.a)({},e),{},{profile:r});default:return e}},expense:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case T:return Object(ne.a)(Object(ne.a)({},e),{},{saved:!0});case F:return Object(ne.a)(Object(ne.a)({},e),{},{fetching:!0});case I:var a=r.expense,c=r.statistics;return Object(ne.a)(Object(ne.a)({},e),{},{fetching:!1,expense:a,statistics:c});case L:return Object(ne.a)(Object(ne.a)({},e),{},{fetching:!1});case B:return Object(ne.a)(Object(ne.a)({},e),{},{saved:!1,updated:!1});case R:return Object(ne.a)(Object(ne.a)({},e),{},{updated:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case D:return Object(ne.a)(Object(ne.a)({},e),{},{message:r});case N:return Ve;default:return e}}}),qe=[Pe.a],He=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Le.c,ze=Object(Le.d)(Ye,{},He(Le.a.apply(void 0,qe)));ze.dispatch((function(e){try{var t=localStorage.getItem(Y);if(null===t||"undefined"===t)return e(z("You need to login"));V(t),e(q()),e(H(t))}catch(n){console.log(n)}})),c.a.render(Object(ee.jsx)(s.a,{children:Object(ee.jsx)(i.a,{store:ze,children:Object(ee.jsx)(Ie,{})})}),document.getElementById("root")),o()}},[[283,1,2]]]);
//# sourceMappingURL=main.0fc09e32.chunk.js.map