{"ast":null,"code":"import { AUTH_FAILED, AUTH_SUCCESS, AUTH_ATTEMPTING, USER_LOGOUT } from './types';\nimport { apiLogin, getProfile } from '../api/user';\nconst TOKEN_NAME = 'expense_app_token';\nexport const signIn = request_data => {\n  return async dispatch => {\n    dispatch({\n      type: AUTH_ATTEMPTING\n    });\n\n    try {\n      const {\n        data\n      } = await apiLogin(request_data);\n      dispatch(success(data.token));\n    } catch (e) {\n      const {\n        response: {\n          data\n        }\n      } = e;\n      dispatch(error(data.error));\n    }\n  };\n};\nexport const onLoadingSignIn = () => {\n  return dispatch => {\n    try {\n      const token = localStorage.getItem(TOKEN_NAME);\n\n      if (token === null || token === 'undefined') {\n        return dispatch(error('You need to login'));\n      }\n\n      dispatch(success(token));\n    } catch (e) {\n      console.log(e);\n    }\n  };\n};\nexport const fetchProfile = () => {\n  return async dispatch => {\n    try {\n      const {\n        data\n      } = await getProfile();\n    } catch (e) {\n      console.error(e);\n    }\n  };\n};\nexport const logOut = () => {\n  localStorage.clear();\n  return {\n    type: USER_LOGOUT\n  };\n};\n\nconst success = token => {\n  localStorage.setItem(TOKEN_NAME, token);\n  return {\n    type: AUTH_SUCCESS\n  };\n};\n\nconst error = error => {\n  return {\n    type: AUTH_FAILED,\n    payload: error\n  };\n};","map":{"version":3,"sources":["C:/Users/ahmed/Documents/mern-expense-app/client/src/actions/auth_actions.js"],"names":["AUTH_FAILED","AUTH_SUCCESS","AUTH_ATTEMPTING","USER_LOGOUT","apiLogin","getProfile","TOKEN_NAME","signIn","request_data","dispatch","type","data","success","token","e","response","error","onLoadingSignIn","localStorage","getItem","console","log","fetchProfile","logOut","clear","setItem","payload"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,YAAtB,EAAoCC,eAApC,EAAqDC,WAArD,QAAwE,SAAxE;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,aAArC;AAEA,MAAMC,UAAU,GAAG,mBAAnB;AACA,OAAO,MAAMC,MAAM,GAAGC,YAAY,IAAI;AAClC,SAAO,MAAMC,QAAN,IAAkB;AACrBA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAER;AAAR,KAAD,CAAR;;AACA,QAAI;AACA,YAAM;AAAES,QAAAA;AAAF,UAAW,MAAMP,QAAQ,CAACI,YAAD,CAA/B;AACAC,MAAAA,QAAQ,CAACG,OAAO,CAACD,IAAI,CAACE,KAAN,CAAR,CAAR;AACH,KAHD,CAGE,OAAOC,CAAP,EAAU;AACR,YAAM;AAAEC,QAAAA,QAAQ,EAAE;AAAEJ,UAAAA;AAAF;AAAZ,UAAyBG,CAA/B;AACAL,MAAAA,QAAQ,CAACO,KAAK,CAACL,IAAI,CAACK,KAAN,CAAN,CAAR;AACH;AACJ,GATD;AAUH,CAXM;AAaP,OAAO,MAAMC,eAAe,GAAG,MAAM;AAEjC,SAAOR,QAAQ,IAAI;AACf,QAAI;AACA,YAAMI,KAAK,GAAGK,YAAY,CAACC,OAAb,CAAqBb,UAArB,CAAd;;AACA,UAAIO,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,WAAhC,EAA6C;AACzC,eAAOJ,QAAQ,CAACO,KAAK,CAAC,mBAAD,CAAN,CAAf;AACH;;AACDP,MAAAA,QAAQ,CAACG,OAAO,CAACC,KAAD,CAAR,CAAR;AACH,KAND,CAME,OAAOC,CAAP,EAAU;AACRM,MAAAA,OAAO,CAACC,GAAR,CAAYP,CAAZ;AACH;AACJ,GAVD;AAWH,CAbM;AAeP,OAAO,MAAMQ,YAAY,GAAG,MAAM;AAC9B,SAAO,MAAMb,QAAN,IAAkB;AACrB,QAAI;AACA,YAAM;AAAEE,QAAAA;AAAF,UAAW,MAAMN,UAAU,EAAjC;AACH,KAFD,CAEE,OAAOS,CAAP,EAAU;AACRM,MAAAA,OAAO,CAACJ,KAAR,CAAcF,CAAd;AACH;AACJ,GAND;AAOH,CARM;AAUP,OAAO,MAAMS,MAAM,GAAG,MAAM;AACxBL,EAAAA,YAAY,CAACM,KAAb;AACA,SAAQ;AAAEd,IAAAA,IAAI,EAAEP;AAAR,GAAR;AACH,CAHM;;AAKP,MAAMS,OAAO,GAAIC,KAAD,IAAW;AACvBK,EAAAA,YAAY,CAACO,OAAb,CAAqBnB,UAArB,EAAiCO,KAAjC;AACA,SAAO;AAAEH,IAAAA,IAAI,EAAET;AAAR,GAAP;AACH,CAHD;;AAIA,MAAMe,KAAK,GAAIA,KAAD,IAAW;AACrB,SAAO;AAAEN,IAAAA,IAAI,EAAEV,WAAR;AAAqB0B,IAAAA,OAAO,EAAEV;AAA9B,GAAP;AACH,CAFD","sourcesContent":["import { AUTH_FAILED, AUTH_SUCCESS, AUTH_ATTEMPTING, USER_LOGOUT } from './types'\r\nimport { apiLogin, getProfile } from '../api/user';\r\n\r\nconst TOKEN_NAME = 'expense_app_token';\r\nexport const signIn = request_data => {\r\n    return async dispatch => {\r\n        dispatch({ type: AUTH_ATTEMPTING })\r\n        try {\r\n            const { data } = await apiLogin(request_data)\r\n            dispatch(success(data.token))\r\n        } catch (e) {\r\n            const { response: { data } } = e\r\n            dispatch(error(data.error))\r\n        }\r\n    };\r\n};\r\n\r\nexport const onLoadingSignIn = () => {\r\n\r\n    return dispatch => {\r\n        try {\r\n            const token = localStorage.getItem(TOKEN_NAME);\r\n            if (token === null || token === 'undefined') {\r\n                return dispatch(error('You need to login'));\r\n            }\r\n            dispatch(success(token))\r\n        } catch (e) {\r\n            console.log(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const fetchProfile = () => {\r\n    return async dispatch => {\r\n        try {\r\n            const { data } = await getProfile()\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    }\r\n}\r\n\r\nexport const logOut = () => {\r\n    localStorage.clear()\r\n    return ({ type: USER_LOGOUT })\r\n}\r\n\r\nconst success = (token) => {\r\n    localStorage.setItem(TOKEN_NAME, token)\r\n    return { type: AUTH_SUCCESS }\r\n};\r\nconst error = (error) => {\r\n    return { type: AUTH_FAILED, payload: error }\r\n};"]},"metadata":{},"sourceType":"module"}