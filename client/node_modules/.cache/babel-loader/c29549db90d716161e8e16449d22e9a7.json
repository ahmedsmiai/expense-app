{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{Button,FormGroup,Label,Input,FormFeedback,Alert}from'reactstrap';import{useFormik}from'formik';import{connect}from'react-redux';import{Link}from'react-router-dom';import*as Yup from'yup';import{signIn}from'../actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useDidUpdate(callback){var hasMount=useRef(false);useEffect(function(){if(hasMount.current){callback();}else{hasMount.current=true;}});}function LoginPage(props){useDidUpdate(function(){var isAuth=props.isAuth;if(isAuth){props.history.push('/');}});var validationSchema=Yup.object({email:Yup.string().email(\"Enter a valid email\").required(\"Email is required\"),password:Yup.string().min(6,\"Password must contain at least 8 charcters\").required(\"Enter your password\")});function handleSubmit(){props.signIn(formik.values);}var formik=useFormik({initialValues:{email:\"\",password:\"\"},onSubmit:function onSubmit(){handleSubmit();formik.resetForm();},validationSchema:validationSchema});var renderError=function renderError(){var error=props.error;if(error){return/*#__PURE__*/_jsx(Alert,{color:\"danger\",children:error});}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'block',padding:20},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign in to your account\"}),/*#__PURE__*/_jsx(\"hr\",{}),renderError(),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{valid:!formik.errors.email&&formik.touched.email,invalid:formik.errors.email&&formik.touched.email,name:\"email\",type:\"email\",onBlur:formik.handleBlur,value:formik.values.email,onChange:formik.handleChange('email')}),/*#__PURE__*/_jsxs(FormFeedback,{children:[formik.errors.email,\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Input,{valid:!formik.errors.password&&formik.touched.password,invalid:formik.errors.password&&formik.touched.password,name:\"password\",type:\"password\",onBlur:formik.handleBlur,value:formik.values.password,onChange:formik.handleChange('password')}),/*#__PURE__*/_jsxs(FormFeedback,{children:[formik.errors.password,\" \"]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(Button,{color:\"primary\",type:\"submit\",onClick:formik.handleSubmit,disabled:!formik.isValid||formik.isSubmitting,children:\" Sign In\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Do not have an account ? \",/*#__PURE__*/_jsx(Link,{to:'/signup',children:\"Sign up here\"})]})]})]});}var mapStateToProps=function mapStateToProps(_ref){var auth=_ref.auth;return{attempting:auth.attempting,error:auth.error,isAuth:auth.isAuth};};var Login=connect(mapStateToProps,{signIn:signIn})(LoginPage);export{Login};","map":{"version":3,"sources":["C:/Users/ahmed/Documents/mern-expense-app/client/src/pages/Login.js"],"names":["React","useEffect","useRef","Button","FormGroup","Label","Input","FormFeedback","Alert","useFormik","connect","Link","Yup","signIn","useDidUpdate","callback","hasMount","current","LoginPage","props","isAuth","history","push","validationSchema","object","email","string","required","password","min","handleSubmit","formik","values","initialValues","onSubmit","resetForm","renderError","error","display","padding","errors","touched","handleBlur","handleChange","isValid","isSubmitting","mapStateToProps","auth","attempting","Login"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\r\n\r\nimport { Button, FormGroup, Label, Input, FormFeedback, Alert } from 'reactstrap';\r\nimport { useFormik } from 'formik';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport * as Yup from 'yup'\r\nimport { signIn } from '../actions'\r\n\r\nfunction useDidUpdate (callback) {\r\n    const hasMount = useRef(false)\r\n    useEffect(() => {\r\n      if (hasMount.current) {\r\n        callback()\r\n      } else {\r\n        hasMount.current = true\r\n      }\r\n    })\r\n  }\r\n\r\nfunction LoginPage(props) {\r\n\r\n\r\n    useDidUpdate(()=>{\r\n        const { isAuth } = props\r\n        if (isAuth){\r\n            props.history.push('/')\r\n        }\r\n    })\r\n\r\n\r\n    const validationSchema = Yup.object({\r\n        email: Yup.string()\r\n            .email(\"Enter a valid email\")\r\n            .required(\"Email is required\"),\r\n        password: Yup.string()\r\n            .min(6, \"Password must contain at least 8 charcters\")\r\n            .required(\"Enter your password\")\r\n    })\r\n\r\n    function handleSubmit() {\r\n        props.signIn(formik.values) \r\n    }\r\n\r\n    const formik = useFormik({\r\n        initialValues: {\r\n            email: \"\",\r\n            password: \"\"\r\n        },\r\n        onSubmit: () => {\r\n            handleSubmit()\r\n            formik.resetForm()\r\n        },\r\n        validationSchema\r\n    })\r\n\r\n    const renderError = () => {\r\n        const { error } = props\r\n        if (error) {\r\n            return (\r\n                <Alert color=\"danger\">\r\n                    {error}\r\n                </Alert>\r\n            )\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div style={{ display: 'block', padding: 20 }}>\r\n            <h3>Sign in to your account</h3>\r\n            <hr />\r\n            {renderError()}\r\n            <div>\r\n                <FormGroup>\r\n                    <Label>Email</Label>\r\n                    <Input\r\n                        valid={!formik.errors.email && formik.touched.email}\r\n                        invalid={formik.errors.email && formik.touched.email}\r\n                        name='email'\r\n                        type='email'\r\n                        onBlur={formik.handleBlur}\r\n                        value={formik.values.email}\r\n                        onChange={formik.handleChange('email')}\r\n                    />\r\n                    <FormFeedback>{formik.errors.email} </FormFeedback>\r\n                </FormGroup>\r\n                <br />\r\n                <FormGroup>\r\n                    <Label>Password</Label>\r\n                    <Input\r\n                        valid={!formik.errors.password && formik.touched.password}\r\n                        invalid={formik.errors.password && formik.touched.password}\r\n                        name='password'\r\n                        type='password'\r\n                        onBlur={formik.handleBlur}\r\n                        value={formik.values.password}\r\n                        onChange={formik.handleChange('password')}\r\n                    />\r\n                    <FormFeedback>{formik.errors.password} </FormFeedback>\r\n                </FormGroup>\r\n                <br />\r\n                <div className='text-center'>\r\n                    <Button\r\n\r\n                        color='primary'\r\n                        type='submit'\r\n                        onClick={formik.handleSubmit}\r\n                        disabled={!formik.isValid || formik.isSubmitting}\r\n                    > Sign In\r\n                    </Button>\r\n                    <br />\r\n                    Do not have an account ? <Link to={'/signup'}>Sign up here</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n    return {\r\n        attempting: auth.attempting,\r\n        error: auth.error,\r\n        isAuth: auth.isAuth\r\n    }\r\n}\r\nconst Login = connect(mapStateToProps, { signIn })(LoginPage)\r\nexport { Login }\r\n"]},"metadata":{},"sourceType":"module"}